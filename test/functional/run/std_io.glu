//
// RUN: gluc -c %s -o %t.o && clang -o %t %t.o && %t | FileCheck -v %s
//

import std::io;
import std::alloc;



func test_io() -> Void {
    io::printLine("Starting IO tests...");

    // getCharacter && printCharacter
    var a: Char = io::getCharacter();
    io::printCharacter(a);
    io::printLine("");

    // concatString
    var str1: String = alloc::allocate(50);
    var str2: String = "Hello ";
    var str3: String = "Glu!";
    var result1: String = io::concatString(str1, str2);
    var result2: String = io::concatString(result1, str3);
    io::printLine(result2);
}

func test_alloc() -> Void {
    // check allocate and deallocate
    var ptr: *Char = alloc::allocate(100);
    alloc::deallocate(ptr);
}

func test_files() -> Void {
    io::writeFile({1} as io::File, "Hello, World!\n", 14);
}

func main() -> Int {
    test_io();
    test_alloc();
    test_files();

    return 0;
}
